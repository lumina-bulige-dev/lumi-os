(()=>{var e={};e.id=266,e.ids=[266],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5663:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(4754),s(891),s(5866);var a=s(3191),l=s(8716),r=s(7922),n=s.n(r),i=s(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["compare",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4754)),"/home/runner/work/lumi-os/lumi-os/luminabulige_app/app/compare/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,891)),"/home/runner/work/lumi-os/lumi-os/luminabulige_app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/runner/work/lumi-os/lumi-os/luminabulige_app/app/compare/page.tsx"],m="/compare/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/compare/page",pathname:"/compare",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7958:(e,t,s)=>{Promise.resolve().then(s.bind(s,5721))},3305:(e,t,s)=>{Promise.resolve().then(s.bind(s,7210))},7888:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},5721:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var a=s(326),l=s(7577);let r={FIXED:["家賃","通信","サブスク","保険","ローン","税金","光熱費","その他固定費"],LIFE:["食費","日用品","交通","医療","衣類","交際","その他生活"],WORK:["ツール","学習","移動","備品","投資(自己)","その他仕事"],FUN:["娯楽","外食","趣味","旅行","ゲーム","ギャンブル(注意)","その他FUN"],OTHER:["立替","返金","寄付","不明","その他"]};function n(e){let t=6e4*new Date(e).getTimezoneOffset();return new Date(e-t).toISOString().slice(0,16)}function i(e){return e.toLocaleString("ja-JP",{maximumFractionDigits:0})}function o(){let[e,t]=(0,l.useState)([]),[s,o]=(0,l.useState)(0),[d,c]=(0,l.useState)("EXPENSE"),[m,x]=(0,l.useState)("LIFE"),[u,h]=(0,l.useState)(r.LIFE[0]),[p,b]=(0,l.useState)(""),[g,j]=(0,l.useState)(""),[v,N]=(0,l.useState)("home"),[f,w]=(0,l.useState)(()=>n(Date.now())),y=(0,l.useMemo)(()=>{let t=[...e].sort((e,t)=>e.occurredAt-t.occurredAt),s=0,a=[];for(let e of t)"EXPENSE"===e.kind&&(s+=e.amount),a.push({ts:e.occurredAt,v:s});return 0===a.length&&a.push({ts:Date.now(),v:0}),a},[e]),P=(0,l.useMemo)(()=>{if(!y.length)return"";let e=y.map(e=>e.ts),t=y.map(e=>e.v),s=Math.min(...e),a=Math.max(...e),l=Math.max(...t);return y.map(e=>({x:a===s?0:(e.ts-s)/(a-s||1)*300,y:0===l?80:80-(e.v-0)/(l-0||1)*80})).map((e,t)=>`${0===t?"M":"L"}${e.x},${e.y}`).join(" ")},[y]),E=(0,l.useMemo)(()=>{let t=e.filter(e=>"INCOME"===e.kind).reduce((e,t)=>e+t.amount,0),a=e.filter(e=>"EXPENSE"===e.kind).reduce((e,t)=>e+t.amount,0),l=s+t-a;return{incomesTotal:t,expensesTotal:a,balance:l}},[e,s]);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("header",{className:"space-y-1",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Compare / Money Stabilizer（β）"}),a.jsx("p",{className:"text-slate-300 text-sm",children:"開始残高 + 入金/支出ログで「床」を管理する。"})]}),(0,a.jsxs)("section",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[(0,a.jsxs)("div",{className:"flex items-baseline justify-between mb-2",children:[a.jsx("div",{className:"text-sm text-slate-200 font-semibold",children:"累積支出グラフ"}),(0,a.jsxs)("div",{className:"text-xs text-slate-400",children:["最新：\xa5"," ",i(y[y.length-1]?.v??0)]})]}),(0,a.jsxs)("svg",{viewBox:"0 0 300 80",className:"w-full h-24",preserveAspectRatio:"none",children:[a.jsx("defs",{children:(0,a.jsxs)("linearGradient",{id:"expenseFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"#38bdf8",stopOpacity:"0.6"}),a.jsx("stop",{offset:"100%",stopColor:"#38bdf8",stopOpacity:"0"})]})}),a.jsx("line",{x1:"0",y1:"79",x2:"300",y2:"79",stroke:"rgba(148,163,184,0.4)",strokeWidth:"0.5"}),P&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("path",{d:`${P} L300,80 L0,80 Z`,fill:"url(#expenseFill)"}),a.jsx("path",{d:P,fill:"none",stroke:"#38bdf8",strokeWidth:"2"})]})]})]}),(0,a.jsxs)("section",{className:"rounded-xl border border-white/10 bg-white/5 p-4 space-y-3",children:[(0,a.jsxs)("label",{className:"text-xs text-slate-300 block",children:["開始残高（必須）",a.jsx("input",{className:"mt-1 w-full rounded-lg bg-slate-950/60 border border-white/10 px-3 py-2",inputMode:"numeric",value:s,onChange:e=>o(Number(e.target.value))})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:()=>c("EXPENSE"),className:`rounded-lg px-3 py-2 text-sm border ${"EXPENSE"===d?"bg-white text-slate-950":"border-white/15 bg-white/5 text-slate-200"}`,children:"支出"}),a.jsx("button",{type:"button",onClick:()=>c("INCOME"),className:`rounded-lg px-3 py-2 text-sm border ${"INCOME"===d?"bg-white text-slate-950":"border-white/15 bg-white/5 text-slate-200"}`,children:"入金"})]}),(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-5",children:[(0,a.jsxs)("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"text-xs text-slate-300",children:"親カテゴリ"}),a.jsx("select",{className:"mt-1 w-full rounded-lg bg-slate-950/60 border border-white/10 px-3 py-2",value:m,onChange:e=>x(e.target.value),children:["FIXED","LIFE","WORK","FUN","OTHER"].map(e=>a.jsx("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-xs text-slate-300",children:"子カテゴリ"}),a.jsx("select",{className:"mt-1 w-full rounded-lg bg-slate-950/60 border border-white/10 px-3 py-2",value:u,onChange:e=>h(e.target.value),children:r[m].map(e=>a.jsx("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"text-xs text-slate-300",children:"金額（JPY）"}),a.jsx("input",{className:"mt-1 w-full rounded-lg bg-slate-950/60 border border-white/10 px-3 py-2",placeholder:"例：1200",inputMode:"numeric",value:p,onChange:e=>b(e.target.value)})]}),(0,a.jsxs)("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"text-xs text-slate-300",children:"場所"}),(0,a.jsxs)("select",{className:"mt-1 w-full rounded-lg bg-slate-950/60 border border-white/10 px-3 py-2",value:v??"other",onChange:e=>N(e.target.value),children:[a.jsx("option",{value:"home",children:"home"}),a.jsx("option",{value:"work",children:"work"}),a.jsx("option",{value:"move",children:"move"}),a.jsx("option",{value:"other",children:"other"})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-5 items-end",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-xs text-slate-300",children:"発生時刻"}),a.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded-lg bg-slate-950/60 border border-white/10 px-3 py-2",value:f,onChange:e=>w(e.target.value)})]}),a.jsx("div",{className:"md:col-span-1",children:a.jsx("button",{className:"w-full rounded-lg border border-white/15 bg-white/10 px-3 py-2 hover:bg-white/15",onClick:()=>w(n(Date.now())),type:"button",children:"今"})}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-xs text-slate-300",children:"メモ（任意）"}),a.jsx("input",{className:"mt-1 w-full rounded-lg bg-slate-950/60 border border-white/10 px-3 py-2",placeholder:"例：深夜テンションでコンビニ",value:g,onChange:e=>j(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[a.jsx("button",{className:"rounded-lg bg-white text-slate-950 px-4 py-2 font-semibold",onClick:function(){let e=Number(p);if(!Number.isFinite(e)||e<=0)return;let s=Date.now(),a=function(e){let t=new Date(e).getTime();return Number.isFinite(t)?t:Date.now()}(f),l={id:"undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():`id_${Math.random().toString(16).slice(2)}_${Date.now()}`,createdAt:s,occurredAt:a,kind:d,parent:m,child:u,amount:Math.round(e),memo:g.trim()?g.trim():void 0,placeTag:v};t(e=>[l,...e].sort((e,t)=>t.occurredAt-e.occurredAt)),b(""),j("")},type:"button",children:"追加"}),(0,a.jsxs)("div",{className:"ml-auto text-sm text-slate-200",children:["残高：",(0,a.jsxs)("span",{className:"font-mono",children:["\xa5 ",i(E.balance)]})]})]}),E.balance<0&&a.jsx("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 p-3 text-sm text-red-200 mt-2",children:"⚠️ 残高がマイナスです（床が抜けました）。入金 or 開始残高を確認してね。"}),(0,a.jsxs)("div",{className:"grid gap-2 md:grid-cols-3 text-sm mt-3",children:[(0,a.jsxs)("div",{className:"rounded-lg border border-white/10 bg-slate-950/40 p-3",children:[a.jsx("div",{className:"text-xs text-slate-300",children:"開始残高"}),(0,a.jsxs)("div",{className:"font-semibold",children:["\xa5 ",i(s)]})]}),(0,a.jsxs)("div",{className:"rounded-lg border border-white/10 bg-slate-950/40 p-3",children:[a.jsx("div",{className:"text-xs text-slate-300",children:"入金合計"}),(0,a.jsxs)("div",{className:"font-semibold",children:["\xa5 ",i(E.incomesTotal)]})]}),(0,a.jsxs)("div",{className:"rounded-lg border border-white/10 bg-slate-950/40 p-3",children:[a.jsx("div",{className:"text-xs text-slate-300",children:"支出合計"}),(0,a.jsxs)("div",{className:"font-semibold",children:["\xa5 ",i(E.expensesTotal)]})]})]})]}),(0,a.jsxs)("section",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[a.jsx("h2",{className:"font-semibold mb-3",children:"ログ"}),0===e.length?a.jsx("p",{className:"text-slate-300 text-sm",children:"まだログがない。まず1件、現実世界から拾ってこい\uD83E\uDEF3\uD83C\uDF0D"}):a.jsx("div",{className:"space-y-2",children:e.map(e=>(0,a.jsxs)("div",{className:"rounded-lg border border-white/10 bg-slate-950/40 p-3 flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"min-w-[100px] text-xs text-slate-300",children:[e.kind,a.jsx("div",{className:"text-slate-400",children:new Date(e.occurredAt).toLocaleString("ja-JP")})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"font-semibold",children:[e.parent," / ",e.child,e.placeTag?(0,a.jsxs)("span",{className:"ml-2 text-xs text-slate-400",children:["(",e.placeTag,")"]}):null]}),e.memo?a.jsx("div",{className:"text-xs text-slate-300 mt-1",children:e.memo}):null]}),a.jsx("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"font-bold",children:["\xa5 ",i(e.amount)]})})]},e.id))})]})]})}},7210:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(326),l=s(434),r=s(5047);let n=[{href:"/cia",label:"CIA"},{href:"/beta",label:"Beta"},{href:"/compare",label:"Compare"}];function i(){let e=(0,r.usePathname)();return(0,a.jsxs)("header",{className:"lumi-header",children:[a.jsx(l.default,{href:"/",className:"text-lg font-semibold tracking-[0.18em] text-white",children:"LUMINA"}),a.jsx("nav",{className:"lumi-nav","aria-label":"Primary",children:n.map(t=>{let s=e===t.href;return a.jsx(l.default,{href:t.href,className:`lumi-nav-item ${s?"is-active":""}`,"aria-current":s?"page":void 0,children:t.label},t.href)})})]})}},4754:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(9510);let l=(0,s(8570).createProxy)(String.raw`/home/runner/work/lumi-os/lumi-os/luminabulige_app/app/components/MoneyStabilizer.tsx#default`);function r(){return a.jsx("main",{className:"mx-auto max-w-4xl px-4 py-8",children:a.jsx(l,{})})}},891:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(9510);let l=(0,s(8570).createProxy)(String.raw`/home/runner/work/lumi-os/lumi-os/luminabulige_app/app/components/TopNav.tsx#default`);function r({children:e}){return a.jsx("html",{lang:"ja",children:(0,a.jsxs)("body",{className:"bg-slate-950 text-slate-50",children:[a.jsx(l,{}),a.jsx("main",{className:"mx-auto max-w-4xl px-4 py-8",children:e})]})})}s(7272)},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[24],()=>s(5663));module.exports=a})();