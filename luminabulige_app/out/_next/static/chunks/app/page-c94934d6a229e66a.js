(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6475:function(e,t,n){Promise.resolve().then(n.bind(n,6245))},6245:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n(7437),l=n(2265),a=n(9376),i=n(7648),o=n(9856),u=n(2904);function s(){let e=(0,a.useRouter)(),[t,n]=(0,l.useState)(0),[s,c]=(0,l.useState)(0),[f,d]=(0,l.useState)(""),[m,b]=(0,l.useState)(!1),g=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=(0,u.Oz)();return n(e.balance),c(e.floor),()=>{g.current&&window.clearTimeout(g.current)}},[]),(0,l.useEffect)(()=>{(0,u.FB)(t,s)},[t,s]);let p=(0,l.useMemo)(()=>(0,o.N)(t,s),[t,s]),h=(0,l.useMemo)(()=>t-s,[t,s]),N=(0,l.useMemo)(()=>t>0&&s>0,[t,s]),y=(0,l.useMemo)(()=>{let e="btn-base";if(!N)return{label:"数字を入れてください",className:e};switch(p){case"SAFE":return{label:m?"保存中…":"今日のログとして保存（SAFE）",className:"".concat(e," btn-safe")};case"WARNING":return{label:m?"保存中…":"少し注意しながら保存（WARNING）",className:"".concat(e," btn-warning")};case"DANGER":return{label:m?"保存中…":"要注意ログとして保存（DANGER）",className:"".concat(e," btn-danger")};default:return{label:m?"保存中…":"今日のログとして保存",className:e}}},[p,m,N]);return(0,r.jsxs)("main",{style:{padding:24,maxWidth:720,margin:"0 auto"},children:[(0,r.jsx)("h1",{style:{fontSize:40,marginBottom:8},children:"Compare"}),(0,r.jsxs)("section",{style:{display:"grid",gap:12,marginBottom:20},children:[(0,r.jsxs)("label",{children:["残高（円）",(0,r.jsx)("input",{type:"number",value:t,onChange:e=>n(Number(e.target.value)),style:{width:"100%",padding:12,fontSize:16,marginTop:6}})]}),(0,r.jsxs)("label",{children:["Floor（絶対割れない下限・円）",(0,r.jsx)("input",{type:"number",value:s,onChange:e=>c(Number(e.target.value)),style:{width:"100%",padding:12,fontSize:16,marginTop:6}})]}),(0,r.jsx)("button",{onClick:function(){if(N&&!m){b(!0);try{let n=(0,u.AH)(t,s);d("今日のログ保存OK：".concat(n.date," / ").concat(n.level)),g.current=window.setTimeout(()=>{e.push("/beta")},555)}finally{window.setTimeout(()=>b(!1),700)}}},className:y.className,disabled:!N||m,children:y.label}),f?(0,r.jsx)("div",{style:{opacity:.8},children:f}):null,(0,r.jsxs)("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[(0,r.jsx)(i.default,{href:"/beta",className:"link",children:"30日ログを見る"}),(0,r.jsx)("a",{href:"https://luminabulige.com/",className:"link",children:"LPへ戻る"})]})]}),(0,r.jsxs)("section",{style:{padding:16,border:"1px solid #ddd",borderRadius:12},children:[(0,r.jsx)("h2",{style:{marginTop:0},children:"判定"}),(0,r.jsxs)("p",{style:{fontSize:22,margin:"8px 0"},children:["今日の安全度：",(0,r.jsx)("b",{children:p})]}),(0,r.jsxs)("p",{style:{margin:0,opacity:.9},children:["Floorとの差分：",(0,r.jsxs)("b",{children:[h.toLocaleString(),"円"]})]})]})]})}},9856:function(e,t,n){"use strict";function r(e,t){return e>=1.2*t?"SAFE":e>=t?"WARNING":"DANGER"}n.d(t,{N:function(){return r}})},2904:function(e,t,n){"use strict";n.d(t,{AH:function(){return s},FB:function(){return o},Iz:function(){return f},Oz:function(){return i},T5:function(){return u},ZK:function(){return c}});var r=n(9856);let l="lumi:compare:v1",a="lumi:dailyLogs:v1";function i(){let e=d(l);if(e&&"number"==typeof e.balance&&"number"==typeof e.floor)return{balance:e.balance,floor:e.floor};let t=d("lumi_compare_v1");return t&&"number"==typeof t.balance&&"number"==typeof t.floor?(o(t.balance,t.floor),{balance:t.balance,floor:t.floor}):{balance:0,floor:0}}function o(e,t){localStorage.setItem(l,JSON.stringify({balance:e,floor:t}))}function u(){let e=d(a);return e&&Array.isArray(e)?e.filter(m):[]}function s(e,t){let n=Number(e),l=Number(t);if(!Number.isFinite(n)||!Number.isFinite(l))throw Error("Invalid balance/floor");let i=function(){let e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)}(),o=(0,r.N)(n,l),s=n-l,c=u(),f={date:i,balanceYen:n,floorYen:l,level:o,diffYen:s},d=[f,...c.filter(e=>e.date!==i)].sort((e,t)=>e.date<t.date?1:-1).slice(0,30);return localStorage.setItem(a,JSON.stringify(d)),f}function c(e){let t=new Date;t.setDate(t.getDate()-29);let n=t.toISOString().slice(0,10);return e.filter(e=>e.date>=n).sort((e,t)=>e.date<t.date?1:-1)}function f(e){return{safe:e.filter(e=>"SAFE"===e.level).length,warning:e.filter(e=>"WARNING"===e.level).length,danger:e.filter(e=>"DANGER"===e.level).length,total:e.length}}function d(e){try{let t=localStorage.getItem(e);if(!t)return null;return JSON.parse(t)}catch(e){return null}}function m(e){return e&&"string"==typeof e.date&&"number"==typeof e.balanceYen&&"number"==typeof e.floorYen&&("SAFE"===e.level||"WARNING"===e.level||"DANGER"===e.level)&&"number"==typeof e.diffYen}}},function(e){e.O(0,[448,971,117,744],function(){return e(e.s=6475)}),_N_E=e.O()}]);